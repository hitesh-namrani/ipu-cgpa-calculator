<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>IPU CGPA Calculator | SGPA, Marks vs Grade Point | GGSIPU</title>
    <meta name="description" content="The fastest IPU CGPA & SGPA Calculator for GGSIPU students. Convert marks to grade points, calculate semester GPA, and check marks vs CGPA logic instantly.">
    <meta name="keywords" content="ipu cgpa calculator, ipu sgpa calculator, ipu marks vs cgpa, ggsipu grades, btech percentage calculator, ipu rank list, ipu result">
    <meta name="author" content="Hitesh Namrani">

    <meta property="og:title" content="IPU CGPA Calculator | The 0.1% Standard">
    <meta property="og:description" content="Calculate your SGPA and CGPA instantly with the official GGSIPU grading logic. Fast, dark-mode enabled, and mobile-friendly.">
    <meta property="og:type" content="website">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37;
            --gold-gradient: linear-gradient(135deg, #fcf6ba 0%, #bf953f 50%, #aa771c 100%);
            --bg: #050505;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
            --input-bg: rgba(255,255,255,0.04);
            --danger: #ff4d4d;
            --warning: #ffb142;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at 50% 0%, #1a1a1a 0%, #050505 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        header { padding: 40px 20px; text-align: center; }
        
        .badge {
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.7rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 15px;
            display: inline-block;
        }

        h1 {
            font-size: clamp(2.5rem, 10vw, 4.5rem);
            font-weight: 800;
            background: linear-gradient(to bottom, #fff, #666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
        }

        /* Luxury Nav */
        .nav-bar {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border);
            padding: 8px;
            border-radius: 100px;
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
        }

        .nav-btn {
            padding: 12px 40px;
            border: none;
            border-radius: 100px;
            background: transparent;
            color: #777;
            cursor: pointer;
            font-weight: 600;
            transition: 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .nav-btn.active {
            background: var(--gold-gradient);
            color: #000;
            box-shadow: 0 10px 30px rgba(191, 149, 63, 0.4);
        }

        /* Glass Cards */
        .glass-card {
            width: 100%;
            max-width: 750px;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 40px;
            backdrop-filter: blur(30px);
            display: none;
            animation: slideUp 0.6s ease;
        }

        .glass-card.active { display: block; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* Inputs & Labels */
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr 50px;
            gap: 15px;
            margin-bottom: 15px;
            align-items: end;
            animation: fadeIn 0.3s ease;
        }

        .labels-row {
            display: grid;
            grid-template-columns: 1fr 1fr 50px;
            gap: 15px;
            margin-bottom: 10px;
            padding: 0 5px;
            font-size: 0.75rem;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .cgpa-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Wrapper for Badge */
        .input-wrapper {
            position: relative;
            width: 100%;
        }

        .grade-badge {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gold);
            font-size: 0.9rem;
            font-weight: 800;
            pointer-events: none; /* Allows clicking through to input */
            opacity: 0;
            transition: 0.2s;
        }

        /* Initial Load Section */
        .load-section {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            align-items: flex-end;
            border-bottom: 1px solid var(--border);
            padding-bottom: 30px;
        }

        .field-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            color: #aaa;
            margin-bottom: 8px;
            display: block;
            letter-spacing: 1px;
        }

        .helper-text {
            font-size: 0.65rem;
            color: var(--gold);
            margin-top: 5px;
            opacity: 0.8;
            line-height: 1.4;
        }

        input {
            width: 100%;
            background: var(--input-bg);
            border: 1px solid var(--border);
            padding: 18px;
            padding-right: 40px; /* Space for badge */
            border-radius: 18px;
            color: #fff;
            font-size: 1.1rem;
            text-align: center;
            outline: none;
            transition: 0.3s;
        }

        input:focus { border-color: var(--gold); background: rgba(255,255,255,0.08); }

        /* Info Box */
        .info-box {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 30px;
            font-size: 0.85rem;
            color: #ddd;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .info-icon { font-size: 1.2rem; }

        /* Buttons */
        .action-btn {
            width: 100%;
            padding: 20px;
            border-radius: 20px;
            border: none;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.3s;
        }

        .btn-gold { background: var(--gold-gradient); color: #000; }
        .btn-gold:hover { transform: scale(1.02); filter: brightness(1.1); }

        .btn-outline { 
            background: transparent; 
            border: 1px dashed var(--gold); 
            color: var(--gold); 
            margin-bottom: 20px; 
            margin-top: 10px;
        }
        .btn-outline:hover { background: rgba(212, 175, 55, 0.1); }
        
        .btn-small {
            padding: 18px 30px;
            margin: 0;
            width: auto;
        }

        .remove-icon { 
            color: var(--danger); 
            background: rgba(255, 77, 77, 0.1); 
            border: 1px solid rgba(255, 77, 77, 0.2);
            border-radius: 12px;
            height: 58px; /* Match input height */
            font-size: 1.5rem; 
            cursor: pointer; 
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .remove-icon:hover { background: rgba(255, 77, 77, 0.3); }

        /* Scoring Box */
        .score-container {
            margin-top: 40px;
            padding: 40px;
            background: rgba(0,0,0,0.4);
            border-radius: 30px;
            border: 1px solid var(--gold);
            text-align: center;
            display: none;
            scroll-margin-top: 20px;
        }

        .score-val { font-size: 5rem; font-weight: 800; color: #fff; line-height: 1; margin-bottom: 10px; }
        .score-sub { color: var(--gold); font-size: 0.8rem; letter-spacing: 5px; margin-bottom: 20px; }
        .score-detail { font-size: 0.9rem; color: #777; font-weight: 500; }
        
        .warning-text {
            color: var(--danger);
            font-size: 0.85rem;
            margin-top: 15px;
            padding: 10px;
            border: 1px dashed var(--danger);
            border-radius: 10px;
            background: rgba(255, 77, 77, 0.05);
        }

        /* Footer */
        footer {
            margin-top: auto;
            padding-top: 50px;
            padding-bottom: 30px;
            text-align: center;
            width: 100%;
            max-width: 600px;
        }

        .footer-link {
            font-size: 0.9rem;
            color: #777;
            text-decoration: none;
            border-bottom: 1px dotted #777;
            transition: 0.3s;
            margin-bottom: 15px;
            display: inline-block;
        }
        .footer-link:hover { color: var(--gold); border-bottom-color: var(--gold); }

        .disclaimer {
            font-size: 0.75rem;
            color: #555;
            line-height: 1.5;
            margin-top: 20px;
            opacity: 0.8;
        }
        
    </style>
</head>
<body>

    <header>
        <div class="badge">GGSIPU Grading Standard</div>
        <h1>IPU CGPA Calculator</h1>
    </header>

    <div class="nav-bar">
        <button class="nav-btn active" id="t-sgpa" onclick="tab('sgpa')">SGPA</button>
        <button class="nav-btn" id="t-cgpa" onclick="tab('cgpa')">CGPA</button>
    </div>

    <div id="sgpa-page" class="glass-card active">
        
        <div class="load-section" id="initial-load-box">
            <div style="flex-grow: 1;">
                <span class="field-label">Number of Subjects</span>
                <input type="number" id="num-subjects" placeholder="e.g. 6" min="1" max="15" onkeydown="handleEnter(event, this)">
            </div>
            <button class="action-btn btn-gold btn-small" onclick="loadSubjects()">LOAD</button>
        </div>

        <div id="sgpa-entries"></div>

        <button class="action-btn btn-outline" onclick="addOneSubject()">+ Add One Subject</button>
        
        <button class="action-btn btn-gold" onclick="runSGPA()">Calculate SGPA</button>

        <div id="sgpa-result-box" class="score-container">
            <div id="sgpa-final" class="score-val">0.000</div>
            <div class="score-sub">SEMESTER GPA</div>
            <div id="sgpa-details" class="score-detail"></div>
            <div id="sgpa-warning" style="display:none;" class="warning-text"></div>
        </div>
    </div>

    <div id="cgpa-page" class="glass-card">
        
        <div class="info-box">
            <span class="info-icon">üí°</span>
            <span><strong>1st Sem Student?</strong> You don't need this tab yet! Your SGPA is exactly the same as your CGPA. Use the SGPA calculator.</span>
        </div>

        <div class="cgpa-row">
            <div>
                <span class="field-label">Old CGPA (Sem 1 to Previous)</span>
                <input type="number" id="prev-cgpa" step="0.001" placeholder="e.g. 8.5" onkeydown="handleEnter(event, this)">
                <div class="helper-text">Your official CGPA result before this semester</div>
            </div>
            <div>
                <span class="field-label">Old Total Credits</span>
                <input type="number" id="prev-credits" placeholder="e.g. 100" onkeydown="handleEnter(event, this)">
                <div class="helper-text">Total credits earned from Sem 1 up to previous sem (DO NOT include current sem)</div>
            </div>
        </div>

        <div class="cgpa-row">
            <div>
                <span class="field-label">Current Sem SGPA</span>
                <input type="number" id="curr-sgpa" step="0.001" placeholder="e.g. 9.2" onkeydown="handleEnter(event, this)">
                <div class="helper-text">Calculated from the first tab</div>
            </div>
            <div>
                <span class="field-label">Current Sem Credits</span>
                <input type="number" id="curr-credits" placeholder="e.g. 25" onkeydown="handleEnter(event, this)">
                <div class="helper-text">Only the credits for subjects in this current semester</div>
            </div>
        </div>

        <button class="action-btn btn-gold" onclick="runCGPA()">Calculate CGPA</button>

        <div id="cgpa-result-box" class="score-container">
            <div id="cgpa-final" class="score-val">0.000</div>
            <div class="score-sub">CUMULATIVE GPA</div>
        </div>
    </div>

    <footer>
        <div>
            <a href="https://github.com/hitesh-namrani/ipu-cgpa-calculator" target="_blank" class="footer-link">Found a bug? Raise an issue on GitHub</a>
        </div>
        <p class="disclaimer">
            <strong>Disclaimer:</strong> This is a mini-project based on the IPU Schemata of Evaluation. It is NOT an official university tool. 
            The developer is not responsible for any discrepancies in the calculated GPA. Please verify with official results.
        </p>
    </footer>

    <script>
        // --- Tab Switching ---
        function tab(t) {
            document.querySelectorAll('.glass-card').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(t + '-page').classList.add('active');
            document.getElementById('t-' + t).classList.add('active');
        }

        // --- IPU Grading Logic (Schemata) ---
        function getIPUGP(m) {
            if (m >= 90) return 10; // O
            if (m >= 75) return 9;  // A+
            if (m >= 65) return 8;  // A
            if (m >= 55) return 7;  // B+
            if (m >= 50) return 6;  // B
            if (m >= 45) return 5;  // C
            if (m >= 40) return 4;  // P
            return 0;               // F
        }

        // Helper: Get Grade Letter for Visuals
        function getGradeLetter(m) {
            if (m >= 90) return 'O';
            if (m >= 75) return 'A+';
            if (m >= 65) return 'A';
            if (m >= 55) return 'B+';
            if (m >= 50) return 'B';
            if (m >= 45) return 'C';
            if (m >= 40) return 'P';
            return 'F';
        }

        // --- UX Feature: Enter Key Nav ---
        function handleEnter(e, current) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const inputs = Array.from(document.querySelectorAll('input, button.action-btn'));
                const index = inputs.indexOf(current);
                if (index > -1 && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            }
        }

        // --- UX Feature: Real-time Grade Badge ---
        function updateGradeBadge(input) {
            const wrapper = input.parentElement;
            const badge = wrapper.querySelector('.grade-badge');
            const val = parseFloat(input.value);

            if (!isNaN(val) && val >= 0 && val <= 100 && input.value !== '') {
                badge.innerText = getGradeLetter(val);
                badge.style.opacity = '1';
            } else {
                badge.style.opacity = '0';
            }
        }

        // --- SGPA Functions ---
        
        // 1. Load N boxes (With Safety Limit)
        function loadSubjects() {
            let count = parseInt(document.getElementById('num-subjects').value);
            const container = document.getElementById('sgpa-entries');
            container.innerHTML = ''; // Clear existing

            if (!count || count <= 0) {
                alert("Please enter a valid number of subjects.");
                return;
            }
            if (count > 20) {
                alert("Maximum limit is 20 subjects.");
                count = 20;
            }

            // ADD LABELS ROW
            const labels = document.createElement('div');
            labels.className = 'labels-row';
            labels.innerHTML = `<div>MARKS</div><div>CREDITS</div><div></div>`;
            container.appendChild(labels);

            for(let i = 0; i < count; i++) {
                addOneSubject();
            }

            // Remove/Hide the load section after loading
            document.getElementById('initial-load-box').style.display = 'none';
        }

        // 2. Add single row helper (Modified for Badges & Enter Nav)
        function addOneSubject() {
            const row = document.createElement('div');
            row.className = 'input-row';
            row.innerHTML = `
                <div class="input-wrapper">
                    <input type="number" class="m-in" placeholder="Marks" min="0" max="100" 
                           oninput="updateGradeBadge(this)" onkeydown="handleEnter(event, this)">
                    <span class="grade-badge"></span>
                </div>
                <div>
                    <input type="number" class="c-in" value="4" min="1" max="30" onkeydown="handleEnter(event, this)">
                </div>
                <button class="remove-icon" onclick="this.parentElement.remove()" title="Remove Subject">√ó</button>
            `;
            document.getElementById('sgpa-entries').appendChild(row);
        }

        // 3. Calculate with SKIP Logic & Warning
        function runSGPA() {
            const m = document.querySelectorAll('.m-in');
            const c = document.querySelectorAll('.c-in');
            let totalPoints = 0;
            let totalCredits = 0;
            let validRows = 0;
            let skippedRows = 0;
            let errorFound = false;

            m.forEach((input, i) => {
                if (errorFound) return;

                const valStr = input.value.trim();
                
                // Skip empty boxes but track them
                if (valStr === '') {
                    skippedRows++;
                    return; // Skip this iteration
                }

                const mark = parseFloat(valStr);
                const cred = parseFloat(c[i].value);
                
                // Validation
                if (mark < 0 || mark > 100) {
                    alert(`Invalid Marks: ${mark}. Marks must be between 0 and 100.`);
                    input.style.borderColor = 'var(--danger)';
                    errorFound = true;
                    return;
                }
                if (cred <= 0 || cred > 30 || isNaN(cred)) {
                    alert(`Invalid Credits at row ${i+1}. Must be between 1 and 30.`);
                    c[i].style.borderColor = 'var(--danger)';
                    errorFound = true;
                    return;
                }

                // Reset borders
                input.style.borderColor = 'var(--border)'; 
                c[i].style.borderColor = 'var(--border)';

                // Calculate
                const gradePoint = getIPUGP(mark);
                totalPoints += (gradePoint * cred);
                totalCredits += cred;
                validRows++;
            });

            if (errorFound) return; 

            const resultBox = document.getElementById('sgpa-result-box');
            const warningBox = document.getElementById('sgpa-warning');
            
            if (validRows > 0 && totalCredits > 0) {
                // 3 Decimal Places
                const sgpa = (totalPoints / totalCredits).toFixed(3);
                document.getElementById('sgpa-final').innerText = sgpa;
                document.getElementById('sgpa-details').innerText = `Total Credits: ${totalCredits}`;
                
                // Show Warning if needed
                if (skippedRows > 0) {
                    warningBox.innerText = `‚ö†Ô∏è Warning: ${skippedRows} empty subject(s) were ignored in calculation.`;
                    warningBox.style.display = 'block';
                } else {
                    warningBox.style.display = 'none';
                }

                resultBox.style.display = 'block';
                resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            } else {
                alert("Please enter valid marks and credits for at least one subject.");
                resultBox.style.display = 'none';
            }
        }

        // --- CGPA Functions (Math Fixes) ---
        function runCGPA() {
            const prevCgpa = parseFloat(document.getElementById('prev-cgpa').value);
            const prevCredits = parseFloat(document.getElementById('prev-credits').value);
            const currSgpa = parseFloat(document.getElementById('curr-sgpa').value);
            const currCredits = parseFloat(document.getElementById('curr-credits').value);
            const resultBox = document.getElementById('cgpa-result-box');

            if (prevCgpa < 0 || prevCgpa > 10 || currSgpa < 0 || currSgpa > 10) {
                alert("CGPA/SGPA must be between 0 and 10.");
                return;
            }
            if (prevCredits < 0 || currCredits < 0) {
                alert("Credits cannot be negative.");
                return;
            }

            if (isNaN(prevCgpa) || isNaN(prevCredits) || isNaN(currSgpa) || isNaN(currCredits)) {
                alert("Please fill all fields.");
                resultBox.style.display = 'none';
                return;
            }

            // Math Precision Fix: Weighted Average
            const prevPoints = prevCgpa * prevCredits;
            const currPoints = currSgpa * currCredits;
            const totalWeightedPoints = prevPoints + currPoints;
            const totalCredits = prevCredits + currCredits;

            if(totalCredits === 0) {
                 alert("Total credits cannot be zero.");
                 return;
            }

            // 3 Decimal Places
            const finalCgpa = (totalWeightedPoints / totalCredits).toFixed(3);
            
            document.getElementById('cgpa-final').innerText = finalCgpa;
            resultBox.style.display = 'block';
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>